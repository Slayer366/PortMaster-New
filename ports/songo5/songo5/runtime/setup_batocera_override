#!/bin/sh
# setup_batocera_override.sh

# Original file path
ORIGINAL="/boot/boot/batocera.board.capability"

# Override file path in current directory
OVERRIDE="$1/batocera_board_capability_override"

echo "Placing here: $OVERRIDE"

# Only proceed if the original exists
if [ ! -f "$ORIGINAL" ]; then
    echo "Original file not found: $ORIGINAL"
    exit 0
fi

# Only create override if it doesn't already exist
if [ ! -f "$OVERRIDE" ]; then
    # Read original, remove "lid", squeeze spaces
    MODIFIED="$(sed 's/\blid\b//g' "$ORIGINAL" | tr -s ' ')"
    echo "$MODIFIED" > "$OVERRIDE"
    echo "Override file created: $OVERRIDE"
fi

